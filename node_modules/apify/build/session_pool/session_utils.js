"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getCookiesFromResponse = void 0;

var _toughCookie = require("tough-cookie");

var _errors = require("./errors");

/**
 *
 * @param response
 * @return {undefined|Array}
 */
const getCookiesFromResponse = response => {
  const headers = typeof response.headers === 'function' ? response.headers() : response.headers;
  const cookieHeader = headers['set-cookie'] || '';

  try {
    return Array.isArray(cookieHeader) ? cookieHeader.map(_toughCookie.Cookie.parse) : [_toughCookie.Cookie.parse(cookieHeader)];
  } catch (e) {
    throw new _errors.CookieParseError(cookieHeader);
  }
};

exports.getCookiesFromResponse = getCookiesFromResponse;